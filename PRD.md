# PRD: English Speaking Practice App

## 1. 產品概述

### 1.1 產品名稱
English Speaking Practice (暫定)

### 1.2 產品定位
一個本地運行的桌面 Web 應用，幫助使用者透過 AI 反饋提升英文口說能力，並完整保留學習記錄的檔案主權。

### 1.3 核心價值主張
- **檔案主權**：所有練習記錄以 Markdown 格式儲存在本地，使用者可自由使用其他 AI 工具分析
- **模型自由度**：使用者可自行選擇 LLM 提供商（Gemini / OpenRouter 等）
- **隱私優先**：語音辨識在本地運行，資料不上傳雲端

---

## 2. 目標使用者

**主要使用者：**自己（開發者本人）

**使用者特徵：**
- 想提升英文口說能力
- 重視資料主權和隱私
- 有基本的技術能力（能運行 Python 程式）
- 希望長期追蹤學習進度

---

## 3. MVP 功能範圍

### 3.1 核心功能

#### 功能 1：語音錄製與轉錄
- 使用者在網頁介面點擊按鈕開始/結束錄音
- 使用 Whisper (本地) 將語音轉為文字
- 顯示轉錄結果

#### 功能 2：AI 反饋
- 將轉錄文字送給 Gemini API 分析
- AI 提供：
  - 文法錯誤指正
  - 更道地的母語表達建議
  - 簡短的鼓勵性評語
- 顯示 AI 反饋

#### 功能 3：記錄儲存
- 自動將「使用者口說內容」+「AI 反饋」儲存為 Markdown
- 檔案命名規則：`YYYY-MM-DD.md`
- 同一天多次練習會 append 到同一個檔案
- 儲存位置：`practice_logs/` 資料夾

#### 功能 4：簡單 UI
- 一個乾淨的網頁介面
- 顯示錄音狀態（Ready / Recording / Processing）
- 顯示轉錄結果和 AI 反饋
- 顯示檔案儲存路徑

### 3.2 技術規格

**後端：**
- Python + Flask
- Whisper (base model) - 本地運行
- Google Gemini API (免費 tier)
- python-dotenv 管理 API key

**前端：**
- HTML + JavaScript
- MediaRecorder API (瀏覽器錄音)
- Tailwind CSS (可選)

**檔案格式：**
```markdown
# 2025-12-25

## Practice Session - 14:30

### User's Speech
[轉錄內容]

### AI Feedback
[AI 建議]

---

## Practice Session - 16:15
...
```

### 3.3 非功能需求

- **效能**：Whisper 轉錄時間 < 10 秒（1 分鐘錄音）
- **可用性**：按下錄音後立即開始，無需額外設定
- **可靠性**：錄音檔案暫存，轉錄失敗不會遺失
- **隱私**：所有資料儲存在本地，不上傳雲端

---

## 4. MVP 不包含的功能

以下功能留待 MVP 後迭代：

- ❌ Topic 題庫 + 關鍵詞提示
- ❌ AI 對話模式
- ❌ 熱力圖 / 統計數據
- ❌ 錯誤追蹤分析
- ❌ 多使用者支援
- ❌ 雲端同步

---

## 5. 使用者故事

### US-001：錄音練習
**As a** 使用者  
**I want to** 在網頁上點擊按鈕錄音  
**So that** 我可以練習英文口說

**驗收條件：**
- 點擊「Start Recording」開始錄音
- 錄音時顯示「Recording...」狀態
- 點擊「Stop」結束錄音

### US-002：查看轉錄結果
**As a** 使用者  
**I want to** 看到我說的內容被轉成文字  
**So that** 我知道 AI 正確理解了我的發音

**驗收條件：**
- 錄音結束後 10 秒內顯示轉錄文字
- 文字準確度 > 90%（英文）

### US-003：獲得 AI 反饋
**As a** 使用者  
**I want to** 收到針對我口說內容的文法和用法建議  
**So that** 我可以改進我的英文

**驗收條件：**
- 顯示至少 2-3 條具體建議
- 建議包含「錯誤 → 正確」的對比
- 語氣友善鼓勵

### US-004：儲存學習記錄
**As a** 使用者  
**I want to** 所有練習記錄自動儲存為 Markdown  
**So that** 我可以在 Obsidian 中回顧和管理

**驗收條件：**
- 檔案自動儲存到 `practice_logs/YYYY-MM-DD.md`
- 格式正確，可直接在 Obsidian 開啟
- 同一天多次練習會附加到同一個檔案

---

## 6. 成功指標

**MVP 階段（1-2 週）：**
- ✅ 能成功錄音並轉錄
- ✅ AI 反饋有實質幫助（主觀評估）
- ✅ 連續使用 7 天無重大 bug

**長期（3 個月）：**
- 累積 > 50 次練習記錄
- 透過 Markdown 分析發現明顯的進步軌跡

---

## 7. 開發時程

**Week 1：**
- Day 1-2: 建立 Flask 基礎架構 + Whisper 整合
- Day 3-4: Gemini API 整合 + Prompt 調校
- Day 5-7: 前端介面 + 檔案儲存邏輯

**Week 2：**
- Day 8-10: 測試 + Bug 修復
- Day 11-14: 實際使用 + 迭代改進

---

## 8. 風險與應對

| 風險 | 影響 | 應對策略 |
|------|------|---------|
| Whisper 本地運行太慢 | 使用體驗差 | 降級使用 tiny/base model |
| Gemini 免費額度不夠 | 無法長期使用 | 加入 OpenRouter 作為備案 |
| 錄音在瀏覽器不穩定 | 功能無法使用 | 測試多種瀏覽器，文件化支援清單 |

---

## 9. 未來迭代方向

**Phase 2 (MVP 後)：**
- 新增 Topic 練習模式
- 熱力圖 + 統計數據

**Phase 3：**
- AI 對話模式
- 錯誤趨勢分析

**Phase 4（開源）：**
- 完善文件
- 簡化安裝流程
- 支援更多 LLM 提供商